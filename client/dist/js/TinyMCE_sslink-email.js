!function(){"use strict";var t={127:function(t){t.exports=InsertLinkModal},145:function(t){t.exports=ReactDomClient},153:function(t){t.exports=TinyMCEActionRegistrar},207:function(t){t.exports=Injector},594:function(t){t.exports=React},669:function(t){t.exports=jQuery},815:function(t){t.exports=i18n}},e={};function i(n){var o=e[n];if(void 0!==o)return o.exports;var r=e[n]={exports:{}};return t[n](r,r.exports,i),r.exports}!function(){var t=s(i(815)),e=s(i(153)),n=s(i(594)),o=i(145),r=s(i(669)),a=i(127),l=i(207);function s(t){return t&&t.__esModule?t:{default:t}}const d="sslinkemail",c={init(i){e.default.addAction("sslink",{text:t.default._t("Admin.LINKLABEL_EMAIL","Link to email address"),onAction:t=>t.execCommand(d),priority:51},i.getParam("editorIdentifier")).addCommandWithUrlTest(d,/^mailto:/),i.addCommand(d,()=>{window.jQuery(`#${i.id}`).entwine("ss").openLinkEmailDialog()})}},u="insert-link__dialog-wrapper--email",m=(0,l.loadComponent)((0,a.createInsertLinkModal)("SilverStripe\\Admin\\LeftAndMain","EditorEmailLink"));r.default.entwine("ss",e=>{e("textarea.htmleditor").entwine({openLinkEmailDialog(){let t=e(`#${u}`);t.length||(t=e(`<div id="${u}" />`),e("body").append(t)),t.addClass("insert-link__dialog-wrapper"),t.setElement(this),t.open()}}),e(`#${u}`).entwine({ReactRoot:null,renderModal(e){const i=this.getOriginalAttributes(),r=this.getRequireLinkText();let a=this.getReactRoot();a||(a=(0,o.createRoot)(this[0]),this.setReactRoot(a)),a.render(n.default.createElement(m,{isOpen:e,onInsert:(...t)=>this.handleInsert(...t),onClosed:()=>this.close(),title:t.default._t("Admin.LINK_EMAIL","Insert email link"),bodyClassName:"modal__dialog",className:"insert-link__dialog-wrapper--email",fileAttributes:i,identifier:"Admin.InsertLinkEmailModal",requireLinkText:r}))},getOriginalAttributes(){const t=this.getElement().getEditor(),i=e(t.getSelectedNode()),n=(i.attr("href")||"").split("?");let o=n[0].replace(/^mailto:/,"").split("?")[0];o.match(/.+@.+\..+/)||(o="");const r=n[1]?n[1].match(/subject=([^&]+)/):"";return{Link:o,Subject:r?decodeURIComponent(r[1]):"",Description:i.attr("title")}},buildAttributes(t){const e=this._super(t);let i="",n=e.href.replace(/^mailto:/,"").split("?")[0];return n.match(/.+@.+\..+/)||(n=""),n&&(i=`mailto:${n}`),i&&t.Subject&&(i=`${i}?subject=${encodeURIComponent(t.Subject)}`),e.href=i,delete e.target,e}})}),tinymce.PluginManager.add(d,t=>c.init(t))}()}();