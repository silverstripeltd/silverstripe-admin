!function(){"use strict";var e={207:function(e){e.exports=Injector},127:function(e){e.exports=InsertLinkModal},594:function(e){e.exports=React},145:function(e){e.exports=ReactDomClient},153:function(e){e.exports=TinyMCEActionRegistrar},815:function(e){e.exports=i18n},669:function(e){e.exports=jQuery}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var o=t[i]={exports:{}};return e[i](o,o.exports,n),o.exports}!function(){var e=l(n(815)),t=l(n(153)),i=l(n(594)),r=n(145),o=l(n(669)),s=n(127),a=n(207);function l(e){return e&&e.__esModule?e:{default:e}}const d="sslinknumber",u={init(n){t.default.addAction("sslink",{text:e.default._t("Admin.LINKLABEL_NUMBER","Link to phone number"),onclick:e=>e.execCommand(d),priority:52},n.settings.editorIdentifier).addCommandWithUrlTest(d,/^tel:/),n.addCommand(d,(()=>{window.jQuery(`#${n.id}`).entwine("ss").openLinkNumberDialog()}))}},c="insert-link__dialog-wrapper--number",p=(0,a.loadComponent)((0,s.createInsertLinkModal)("SilverStripe\\Admin\\LeftAndMain","EditorNumberLink"));o.default.entwine("ss",(t=>{t("textarea.htmleditor").entwine({openLinkNumberDialog(){let e=t(`#${c}`);e.length||(e=t(`<div id="${c}" />`),t("body").append(e)),e.addClass("insert-link__dialog-wrapper"),e.setElement(this),e.open()}}),t(`#${c}`).entwine({renderModal(t){var n=this;const o=this.getOriginalAttributes(),s=this.getRequireLinkText();let a=this.getReactRoot();a||(a=(0,r.createRoot)(this[0]),this.setReactRoot(a)),a.render(i.default.createElement(p,{isOpen:t,onInsert:function(){return n.handleInsert(...arguments)},onClosed:()=>this.close(),title:e.default._t("Admin.LINK_NUMBER","Insert number link"),bodyClassName:"modal__dialog",className:"insert-link__dialog-wrapper--number",fileAttributes:o,identifier:"Admin.InsertLinkNumberModal",requireLinkText:s}),this[0])},getOriginalAttributes(){const e=this.getElement().getEditor();let n=(t(e.getSelectedNode()).attr("href")||"").split("?")[0].replace(/^tel:/,"").split("?")[0];return n.match(/^[0-9]+$/)||(n=""),{Link:n}},buildAttributes(e){const t=this._super(e);let n="",i=t.href.replace(/^tel:/,"").split("?")[0];return i.match(/^[0-9]+$/)||(i=""),i&&(n=`tel:${i}`),t.href=n,delete t.target,t}})})),tinymce.PluginManager.add(d,(e=>u.init(e)))}()}();